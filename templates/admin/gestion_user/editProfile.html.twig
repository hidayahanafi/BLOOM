{% extends 'admin/layout.html.twig' %}

{% block title %}Edit Profile{% endblock %}

{% block content %}
<div class="container">
  <div class="page-inner">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header d-flex align-items-center">
            <h4 class="card-title">Edit Profile</h4>
          </div>
          <div class="card-body">
            <div class="row">
              <!-- Profile Image & Basic Info -->
              <div class="col-md-4 text-center">
                <img class="rounded-circle" width="150" src="{{ app.user.profilePicture }}" alt="Profile Image">
                <h5 class="mt-3">{{ app.user.name }}</h5>
                <p class="text-muted">Administrator</p>
              </div>
              <!-- Profile Edit Form -->
              <div class="col-md-8">
                {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}

                <div class="form-group">
                  {{ form_label(form.name) }}
                  {{ form_widget(form.name, {'attr': {'class': 'form-control'}}) }}
                  {{ form_errors(form.name) }}
                </div>

                <div class="form-group mt-3">
                  {{ form_label(form.email) }}
                  {{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}
                  {{ form_errors(form.email) }}
                </div>

                <div class="form-group mt-3">
                  {{ form_label(form.plainPassword) }}
                  {{ form_widget(form.plainPassword, {'attr': {'class': 'form-control'}}) }}
                  {{ form_errors(form.plainPassword) }}
                </div>

                <div class="form-group mt-3">
                  {{ form_label(form.phoneNumber) }}
                  {{ form_widget(form.phoneNumber, {'attr': {'class': 'form-control'}}) }}
                  {{ form_errors(form.phoneNumber) }}
                </div>

                <div class="form-group mt-3">
                  {{ form_label(form.country) }}
                  {{ form_widget(form.country, {'attr': {'class': 'form-control'}}) }}
                  {{ form_errors(form.country) }}
                </div>

                <div class="form-group mb-4">
                  {{ form_label(form.age, 'Ã‚ge', {'label_attr': {'class': 'form-label font-weight-bold'}}) }}
                  {{ form_widget(form.age, {'attr': {'class': 'form-control'}}) }}
                  {{ form_errors(form.age) }}
                </div>

                <div class="form-group mt-3">
                  <div class="form-check">
                      {{ form_widget(form.agreeTerms, {'attr': {'class': 'form-check-input'}}) }}
                      <label class="form-check-label">I agree to the terms and cond   itions</label>
                  </div>
                  <div class="text-danger">{{ form_errors(form.agreeTerms) }}</div>
                </div>


                <div class="text-end mt-4">
                  <button type="submit" class="btn btn-primary">Update Profile</button>
                  <a href="{{ path('user_profile') }}" class="btn btn-secondary">Cancel</a>
                </div>

                {{ form_end(form) }}

                <!-- Delete Account Button -->
                <form method="POST" action="{{ path('user_delete') }}" onsubmit="return confirmDelete();" class="mt-3 text-end">
                  <button type="submit" class="btn btn-danger">Delete Account</button>
                </form>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block javascripts %}
<script>
  function confirmDelete() {
    return confirm("Are you sure you want to delete your account? This action cannot be undone.");
  }
</script>
{% endblock %}
