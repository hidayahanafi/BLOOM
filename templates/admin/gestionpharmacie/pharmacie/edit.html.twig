{% extends 'admin/layout.html.twig' %}

{% block title %}Modifier la Pharmacie : {{ pharmacie.nom }}{% endblock %}

{% block content %}
<div class="pharmacie-container">
    <h1>Modifier la Pharmacie : {{ pharmacie.nom }}</h1>

    {{ form_start(form, {'attr': {'enctype': 'multipart/form-data', 'class': 'needs-validation', 'novalidate': 'novalidate'} } ) }}
    
    <div class="form-group">
        {{ form_label(form.nom, 'Nom de la pharmacie') }}
        {{ form_widget(form.nom, { 'attr': {'class': 'form-control' ~ (form.nom.vars.valid ? '' : ' is-invalid'), 'placeholder': 'Ex: Pharmacie du Centre'} }) }}
        <div class="invalid-feedback">
            {{ form_errors(form.nom) }}
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.adresse, 'Adresse') }}
        {{ form_widget(form.adresse, { 'attr': {'class': 'form-control' ~ (form.adresse.vars.valid ? '' : ' is-invalid'), 'placeholder': 'Ex: 123 Rue de la République'} }) }}
        <div class="invalid-feedback">
            {{ form_errors(form.adresse) }}
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.email, 'Email') }}
        {{ form_widget(form.email, { 'attr': {'class': 'form-control' ~ (form.email.vars.valid ? '' : ' is-invalid'), 'placeholder': 'Ex: contact@pharmacie.com'} }) }}
        <div class="invalid-feedback">
            {{ form_errors(form.email) }}
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.tel, 'Téléphone') }}
        {{ form_widget(form.tel, { 'attr': {'class': 'form-control' ~ (form.tel.vars.valid ? '' : ' is-invalid'), 'placeholder': 'Ex: 12345678'} }) }}
        <div class="invalid-feedback">
            {{ form_errors(form.tel) }}
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.type, 'Type de pharmacie') }}
        {{ form_widget(form.type, { 'attr': {'class': 'form-control' ~ (form.type.vars.valid ? '' : ' is-invalid')} }) }}
        <div class="invalid-feedback">
            {{ form_errors(form.type) }}
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.ville, 'Ville') }}
        {{ form_widget(form.ville, { 'attr': {'class': 'form-control' ~ (form.ville.vars.valid ? '' : ' is-invalid'), 'placeholder': 'Ex: Tunis'} }) }}
        <div class="invalid-feedback">
            {{ form_errors(form.ville) }}
        </div>
    </div>

    <div class="form-group">
        {{ form_label(form.logo, 'Logo') }}
        {{ form_widget(form.logo, { 'attr': {'class': 'form-control-file' ~ (form.logo.vars.valid ? '' : ' is-invalid')} }) }}
        <div class="invalid-feedback">
            {{ form_errors(form.logo) }}
        </div>
    </div>

    {# Affichage du logo actuel si disponible #}
    {% if logoBase64 %}
        <div class="current-logo">
            <p><strong>Logo actuel :</strong></p>
            <img src="data:image/png;base64,{{ logoBase64 }}" alt="{{ pharmacie.nom }} Logo" class="logo-image">
        </div>
    {% else %}
        <p>Aucun logo actuel.</p>
    {% endif %}

    <div class="form-group">
        <a href="{{ path('listph') }}" class="btn btn-secondary">Retour à la liste</a>
    </div>

    {{ form_end(form) }}
</div>
{% endblock %}